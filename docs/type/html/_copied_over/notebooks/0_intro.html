<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="copyright" title="Copyright" href="../../copyright.html" /><link rel="next" title="Spyglass Spike Sorting Tutorial" href="1_spikesorting.html" /><link rel="prev" title="Tutorials" href="../../tutorials.html" />

    <link rel="shortcut icon" href="../../_static/lorenLabImage.png"/><meta name="generator" content="sphinx-5.2.3, furo 2022.09.29"/>
        <title>Spyglass tutorial 0 - Spyglass 0.1.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/datajoint_header.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Spyglass 0.1.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/spyglass.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Spyglass 0.1.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html#installing-packages">Installing packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html#setting-up-database-access">Setting up database access</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../tutorials.html">Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_spikesorting.html">Spike Sorting</a></li>
<li class="toctree-l2"><a class="reference internal" href="1D_Clusterless_Decoding.html">Clusterless Decoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_curation.html">Curation</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_curation_lftest.html">Curation LFP</a></li>
<li class="toctree-l2"><a class="reference internal" href="2D_Clusterless_Decoding.html">Another Clusterless Decoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_lfp.html">LFP</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_position_info.html">Position Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="5_linearization.html">Linearization</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker_mysql_tutorial.html">MySQL Docker</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../_autosummary/spyglass.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../_autosummary/spyglass.cli.html">spyglass.cli</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../_autosummary/spyglass.cli.cli.html">spyglass.cli.cli</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to_contribute.html">How to Contribute</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../misc.html">Miscellaneous</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../figurl_views.html">Figurl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../session_groups.html">Session Groups</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Spyglass-tutorial-0">
<h1>Spyglass tutorial 0<a class="headerlink" href="#Spyglass-tutorial-0" title="Permalink to this heading">#</a></h1>
<p><strong>Note: make a copy of this notebook and run the copy to avoid git conflicts in the future</strong></p>
<p>This is the zeroth in a multi-part tutorial on the Spyglass pipeline used in Loren Frank’s lab, UCSF. It gives a general introduction to Datajoint and shows how to insert an NWB file into the Datajoint database, inspect and query the data, and delete it.</p>
<p>Let’s start by importing the <code class="docutils literal notranslate"><span class="pre">spyglass</span></code> package, along with a few others.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">spyglass</span> <span class="k">as</span> <span class="nn">sg</span>
<span class="kn">import</span> <span class="nn">datajoint</span> <span class="k">as</span> <span class="nn">dj</span>

<span class="c1"># ignore datajoint+jupyter async warnings</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">ResourceWarning</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">UserWarning</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We also import spyglass.common so we can call tables more easily</span>
<span class="kn">import</span> <span class="nn">spyglass.common</span> <span class="k">as</span> <span class="nn">sgc</span>

<span class="c1"># We import spyglass.data_import to allow for inserting an NWB file into the database</span>
<span class="kn">import</span> <span class="nn">spyglass.data_import</span> <span class="k">as</span> <span class="nn">sdi</span>
<br/></pre></div>
</div>
</div>
<section id="Visualizing-the-database">
<h2>Visualizing the database<a class="headerlink" href="#Visualizing-the-database" title="Permalink to this heading">#</a></h2>
<p>Datajoint enables users to use Python to build and interact with a <em>Relational Database</em>. A <em>Relational Database</em> stores and provides access to data stored in row-features and column-features. Each row provide information about different features of an individivial object while each column provide information about a single feature for a collection of objects. It supports the ability to create a new object, read an existing object, update an existing object and delete an object.</p>
<p>The following diagram (called <em>entity relationship diagram</em>) shows all the tables in our database and their relationships.</p>
<p>Polygons are tables: * Blue oval: tables whose entries are imported from external files (e.g. NWB file). * Green rectangle: tables whose entries are entered manually. * Red circle: tables whose entries are computed from entries of other tables. * No shape (only text): tables whose entries are part of the table upstream</p>
<p>Lines are <em>dependencies</em> between tables: * Bold lines: downstream table inherits the <em>primary key</em> ^ of upstream table as its sole primary key * Solid lines: downstream table inherits the primary key of upstream table as part of its primary key * Dashed lines: downstream table inherits the primary key of upstream table as non-primary key</p>
<p>^ Primary key: a set of attributes (i.e. column names) used to uniquely define an entry (i.e. a row)</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Draw tables that are three levels below and one level above Session</span>
<span class="n">dj</span><span class="o">.</span><span class="n">ERD</span><span class="p">(</span><span class="n">sgc</span><span class="o">.</span><span class="n">Session</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">3</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="Example-data">
<h2>Example data<a class="headerlink" href="#Example-data" title="Permalink to this heading">#</a></h2>
<p>Now that we have a general idea of how our database is organized, we will try inserting new data to it. We assume that the data is a neural recording (along with other auxiliary data) that has already been converted to the NWB format. For the purposes of this tutorial, we will use <code class="docutils literal notranslate"><span class="pre">montague20200802.nwb</span></code>. If you’re accessing the Frank lab database on the UCSF network, this file can be found in <code class="docutils literal notranslate"><span class="pre">/stelmo/nwb/raw</span></code> directory (assuming you have mounted <code class="docutils literal notranslate"><span class="pre">stelmo</span></code> at <code class="docutils literal notranslate"><span class="pre">/</span></code>). If you do not have
access to Frank lab database, then download <code class="docutils literal notranslate"><span class="pre">montague20200802.nwb</span></code> from <a class="reference external" href="https://www.dropbox.com/s/srra33e0igaj5rm/montague20200802.nwb?dl=0">here</a> - it is rather big (~ 70 GB) so be aware of that.</p>
<p>Once you have the NWB file, you should copy it and rename the copy to something unique (e.g. <code class="docutils literal notranslate"><span class="pre">montague20200802_yourname.nwb</span></code>). This is because many people will be using this example file to practice inserting data, and a file can only be inserted once (the file name acts as a <em>primary key</em> in the <code class="docutils literal notranslate"><span class="pre">Session</span></code> table).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the name of the file that you copied and renamed; make sure it&#39;s something unique.</span>
<span class="n">nwb_file_name</span> <span class="o">=</span> <span class="s2">&quot;montague20200802_tutorial.nwb&quot;</span>
<span class="n">filename</span><span class="p">,</span> <span class="n">file_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">nwb_file_name</span><span class="p">)</span>
<span class="c1"># This is a copy of the original nwb file, except it doesn&#39;t contain the raw data (for storage reasons)</span>
<span class="n">nwb_copy_file_name</span> <span class="o">=</span> <span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">file_extension</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nwb_file_name</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="Inserting-data">
<h2>Inserting data<a class="headerlink" href="#Inserting-data" title="Permalink to this heading">#</a></h2>
<p>As you may know, the NWB file contains a lot of information, such as information about the experimenter (e.g. who did the experiment, where was it done, etc); the animal’s behavior (e.g. video recording of the animal’s position in an environment during the experiment); the neural activity (extracellular recording of multiple brain areas) etc. We wish to enter this information into the tables of our Datajoint database so that we can easily access them later. If we have an NWB file that has been
properly generated, this is straightforward: just run the <code class="docutils literal notranslate"><span class="pre">sg.insert_session</span></code> function, which will populate many of the tables automatically. Let’s do this for our example NWB file.</p>
<p>Note: this may take a while because it makes a copy of the NWB file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sdi</span><span class="o">.</span><span class="n">insert_sessions</span><span class="p">(</span><span class="n">nwb_file_name</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
</section>
<section id="Inspecting-and-querying-data">
<h2>Inspecting and querying data<a class="headerlink" href="#Inspecting-and-querying-data" title="Permalink to this heading">#</a></h2>
<p>To look at the tables, just call it (don’t forget the <code class="docutils literal notranslate"><span class="pre">()</span></code> at the end, as tables are like Python classes). Let’s try calling the <code class="docutils literal notranslate"><span class="pre">Lab</span></code> table.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgc</span><span class="o">.</span><span class="n">Lab</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<p>There is only one attribute (<code class="docutils literal notranslate"><span class="pre">lab_name</span></code>) and two entries (<code class="docutils literal notranslate"><span class="pre">Loren</span> <span class="pre">Frank</span></code>, <code class="docutils literal notranslate"><span class="pre">Giocomo</span></code>) in this table. Note that even though <code class="docutils literal notranslate"><span class="pre">Lab</span></code> is one of the tables that has to be manually entered (i.e. the green rectangles in our ERD), <code class="docutils literal notranslate"><span class="pre">sg.insert_sessions</span></code> populates it from the NWB file.</p>
<p>Let’s look at a more interesting table: <code class="docutils literal notranslate"><span class="pre">Session</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgc</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<p>This session has multiple attributes. The attributes that make up the primary key are shown in bold. In this case, there is only one attribute in the primary key: <code class="docutils literal notranslate"><span class="pre">nwb_file_name</span></code>. Given that many downstream tables are connected to <code class="docutils literal notranslate"><span class="pre">Session</span></code> via bold lines, you can use this attribute to uniquely define data entries in many tables in our database.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># can also look at the docstring</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">Session</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<p>To look at specific entries from a table, include the appropriate condition with the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> operator. The condition must be in the form of a key-value pair, or a dictionary. As an example, let’s view only the entry whose <code class="docutils literal notranslate"><span class="pre">nwb_file_name</span></code> is our example NWB file in <code class="docutils literal notranslate"><span class="pre">Session</span></code>:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgc</span><span class="o">.</span><span class="n">Session</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">}</span>
<br/></pre></div>
</div>
</div>
<p>Now let’s go to a downstream table: <code class="docutils literal notranslate"><span class="pre">Raw</span></code>. This table is connected to <code class="docutils literal notranslate"><span class="pre">Session</span></code> table with a bold line, so it has the same primary key.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgc</span><span class="o">.</span><span class="n">Raw</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">}</span>
<br/></pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">IntervalList</span></code> table is connected to <code class="docutils literal notranslate"><span class="pre">Session</span></code> table with a solid line, as it inherits <code class="docutils literal notranslate"><span class="pre">nwb_file_name</span></code> as one of the two attributes that make up the primary key. This means that you need to know both <code class="docutils literal notranslate"><span class="pre">nwb_file_name</span></code> and <code class="docutils literal notranslate"><span class="pre">interval_list_name</span></code> to uniquely identify an entry.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgc</span><span class="o">.</span><span class="n">IntervalList</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">}</span>
<br/></pre></div>
</div>
</div>
<p>As you can see, some of the data is shown in the table (e.g. <code class="docutils literal notranslate"><span class="pre">interval_list_name</span></code>) while others are obscured (e.g. <code class="docutils literal notranslate"><span class="pre">valid_times</span></code> are shown as <code class="docutils literal notranslate"><span class="pre">=BLOB=</span></code>). To inspect the data, use the <code class="docutils literal notranslate"><span class="pre">fetch</span></code> (for getting multiple entries) or <code class="docutils literal notranslate"><span class="pre">fetch1</span></code> (for getting just one entry) methods. The following query returns <code class="docutils literal notranslate"><span class="pre">valid_times</span></code> of an interval list called <code class="docutils literal notranslate"><span class="pre">04_r2</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">sgc</span><span class="o">.</span><span class="n">IntervalList</span>
    <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">,</span> <span class="s2">&quot;interval_list_name&quot;</span><span class="p">:</span> <span class="s2">&quot;04_r2&quot;</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">fetch1</span><span class="p">(</span><span class="s2">&quot;valid_times&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Query supports many operations and conditions - just make sure the conditions are in the form of a dictionary. We have already seen that <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> represents the set-theoretic intersection. <code class="docutils literal notranslate"><span class="pre">-</span></code>, on the other hand, is like the set-theoretic complement. The following query returns all <code class="docutils literal notranslate"><span class="pre">interval_list_name</span></code> that is not <code class="docutils literal notranslate"><span class="pre">01_s1</span></code> or <code class="docutils literal notranslate"><span class="pre">04_r2</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="p">(</span>
        <span class="p">(</span><span class="n">sgc</span><span class="o">.</span><span class="n">IntervalList</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">})</span>
        <span class="o">-</span> <span class="p">{</span><span class="s2">&quot;interval_list_name&quot;</span><span class="p">:</span> <span class="s2">&quot;01_s1&quot;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="o">-</span> <span class="p">{</span><span class="s2">&quot;interval_list_name&quot;</span><span class="p">:</span> <span class="s2">&quot;04_r2&quot;</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;interval_list_name&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<p>Other available operations are described <a class="reference external" href="https://docs.datajoint.org/python/queries/05-Operators.html">here</a>. Also feel free to inspect other tables and learn what kind of data they contain.</p>
</section>
<section id="Deleting-data">
<h2>Deleting data<a class="headerlink" href="#Deleting-data" title="Permalink to this heading">#</a></h2>
<p>Another neat feature of Datajoint is that it automatically maintains the integrity of your data. For example, if we were to delete our entry in the <code class="docutils literal notranslate"><span class="pre">Session</span></code> table, the associated entries in all of the downstream tables (e.g. <code class="docutils literal notranslate"><span class="pre">Raw</span></code>, <code class="docutils literal notranslate"><span class="pre">IntervalList</span></code>, <code class="docutils literal notranslate"><span class="pre">ElectrodeGroup</span></code> to name a few) will also be deleted. That way, there is no ‘orphan’ data whose origin cannot be tracked. We will do this now using the <code class="docutils literal notranslate"><span class="pre">delete</span></code> method.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># our data is currently in Session table</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">Session</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">}</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Type `yes` when prompted to delete</span>
<span class="p">(</span><span class="n">sgc</span><span class="o">.</span><span class="n">Session</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">})</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check that delete worked</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">Session</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">}</span>
<br/></pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">delete</span></code> method is useful when you need to re-do something. We discourage editing an entry because this will affect the associated entries in downstream tables and violate data integrity. Instead it is recommended that you just delete and re-enter it. This is easy to do, as most data entry is automated in our pipeline.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Entries are also gone from downstream tables, e.g. IntervalList</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">IntervalList</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">}</span>
<br/></pre></div>
</div>
</div>
<p>We’re not quite done yet. Not only should we delete our entry from <code class="docutils literal notranslate"><span class="pre">Session</span></code>, we should also delete the associated entry in <code class="docutils literal notranslate"><span class="pre">Nwbfile</span></code>. Recall from the entity relationship diagram that <code class="docutils literal notranslate"><span class="pre">Nwbfile</span></code> is upstream of <code class="docutils literal notranslate"><span class="pre">Session</span></code>. That means getting rid of our entry from <code class="docutils literal notranslate"><span class="pre">Session</span></code> doesn’t affect the corresponding entry in <code class="docutils literal notranslate"><span class="pre">Nwbfile</span></code> - this has to be manually removed. To do so, we again use the <code class="docutils literal notranslate"><span class="pre">delete</span></code> method, but in the case of <code class="docutils literal notranslate"><span class="pre">Nwbfile</span></code> there is an extra step: we need to remove the NWB
file itself as well as the entry from <code class="docutils literal notranslate"><span class="pre">Nwbfile</span></code> table. To remove the files, we run the <code class="docutils literal notranslate"><span class="pre">cleanup</span></code> method with the <code class="docutils literal notranslate"><span class="pre">delete_files</span></code> argument as <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Note that the same idea applies to deleting files from <code class="docutils literal notranslate"><span class="pre">AnalysisNwbfile</span></code> table.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check out the Nwb file</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">Nwbfile</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">}</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Let&#39;s delete the entry</span>
<span class="p">(</span><span class="n">sgc</span><span class="o">.</span><span class="n">Nwbfile</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s2">&quot;nwb_file_name&quot;</span><span class="p">:</span> <span class="n">nwb_copy_file_name</span><span class="p">})</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Note that the file (ends with _.nwb) has not been deleted, even though the entry is</span>
<span class="o">!</span>ls <span class="nv">$SPYGLASS_BASE_DIR</span>/raw
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We clean it up</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">Nwbfile</span><span class="p">()</span><span class="o">.</span><span class="n">cleanup</span><span class="p">(</span><span class="n">delete_files</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now the file is gone as well</span>
<span class="o">!</span>ls <span class="nv">$SPYGLASS_BASE_DIR</span>/raw
</pre></div>
</div>
</div>
</section>
<section id="Creating-a-Lab-Team">
<h2>Creating a Lab Team<a class="headerlink" href="#Creating-a-Lab-Team" title="Permalink to this heading">#</a></h2>
<p>Before we end this tutorial, there is one last thing we must do: create a lab team. A lab team is a set of lab members who own a set of NWB files and the associated information in our Datajoint database. Think of this as a “subgroup” within the lab that collaborates on the same projects. Only the members of a lab team will be able to delete table entries they made (this permission system is not yet implemented; we’re working on it). Right now we need to set a lab team so that the permission for
manual curation of spike sorted data can be set (this will be covered in <a class="reference internal" href="2_curation.html"><span class="doc">tutorial 2</span></a>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">LabMember</span></code> table contains the list of lab members. It has a parts table called <code class="docutils literal notranslate"><span class="pre">LabMemberInfo</span></code>, where the Google account of each member can be found (for authentication purposes). Similarly, <code class="docutils literal notranslate"><span class="pre">LabTeam</span></code> table contains the list of lab teams and has a parts table called <code class="docutils literal notranslate"><span class="pre">LabTeamMember</span></code> which specifies which of the lab members (as entered in <code class="docutils literal notranslate"><span class="pre">LabMember</span></code>) belongs to each lab team. Both <code class="docutils literal notranslate"><span class="pre">LabMember</span></code> and <code class="docutils literal notranslate"><span class="pre">LabTeam</span></code> are <code class="docutils literal notranslate"><span class="pre">dj.Manual</span></code> tables, which means the data can be entered manually
(although when we add our NWB file with <code class="docutils literal notranslate"><span class="pre">nd.insert_sessions(nwb_file_name)</span></code>, the owner of the NWB file (as specified in the <code class="docutils literal notranslate"><span class="pre">experimenter</span></code> field) is automatically entered into <code class="docutils literal notranslate"><span class="pre">LabMember</span></code> table).</p>
<p>To proceed, we will create a new team using the <code class="docutils literal notranslate"><span class="pre">create_new_team</span></code> method of <code class="docutils literal notranslate"><span class="pre">LabTeam</span></code>. You will give this team a name, and add yourself (and your Google account) to this team. Later, when we do spike sorting, we will specify the team the sorting belongs to. This will give everyone in the team (in this case, just you) the permission to add curation labels.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># take a look at the lab members</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">LabMember</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># LabMember also has a Parts table called LabMemberInfo</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">LabMember</span><span class="o">.</span><span class="n">LabMemberInfo</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># these are the existing lab teams</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">LabTeam</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a new team</span>
<span class="c1"># change team_name to something unique</span>
<span class="c1"># change team_members</span>
<span class="c1"># team_description is optional</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">LabTeam</span><span class="p">()</span><span class="o">.</span><span class="n">create_new_team</span><span class="p">(</span>
    <span class="n">team_name</span><span class="o">=</span><span class="s2">&quot;Beans&quot;</span><span class="p">,</span> <span class="n">team_members</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Alison Comrie&quot;</span><span class="p">],</span> <span class="n">team_description</span><span class="o">=</span><span class="s2">&quot;test&quot;</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add info about the team members</span>
<span class="c1"># add your name and your google account</span>
<span class="n">sgc</span><span class="o">.</span><span class="n">LabMember</span><span class="o">.</span><span class="n">LabMemberInfo</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
    <span class="p">[[</span><span class="s2">&quot;Alison Comrie&quot;</span><span class="p">,</span> <span class="s2">&quot;comrie.alison@gmail.com&quot;</span><span class="p">,</span> <span class="s2">&quot;alison&quot;</span><span class="p">]],</span> <span class="n">skip_duplicates</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sgc</span><span class="o">.</span><span class="n">LabMember</span><span class="o">.</span><span class="n">LabMemberInfo</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="1_spikesorting.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Spyglass Spike Sorting Tutorial</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../../tutorials.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Tutorials</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../../copyright.html">Copyright</a> &#169; 2020 - Present, Loren Frank
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Spyglass tutorial 0</a><ul>
<li><a class="reference internal" href="#Visualizing-the-database">Visualizing the database</a></li>
<li><a class="reference internal" href="#Example-data">Example data</a></li>
<li><a class="reference internal" href="#Inserting-data">Inserting data</a></li>
<li><a class="reference internal" href="#Inspecting-and-querying-data">Inspecting and querying data</a></li>
<li><a class="reference internal" href="#Deleting-data">Deleting data</a></li>
<li><a class="reference internal" href="#Creating-a-Lab-Team">Creating a Lab Team</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/text-adjustments.js"></script>
    </body>
</html>